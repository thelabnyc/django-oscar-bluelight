!function(e){function t(t){for(var a,o,u=t[0],f=t[1],c=t[2],s=0,d=[];s<u.length;s++)o=u[s],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in f)Object.prototype.hasOwnProperty.call(f,a)&&(e[a]=f[a]);for(i&&i(t);d.length;)d.shift()();return l.push.apply(l,c||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],a=!0,u=1;u<r.length;u++){var f=r[u];0!==n[f]&&(a=!1)}a&&(l.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={0:0},l=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window.webpackJsonp=window.webpackJsonp||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var i=f;l.push([5,1]),r()}({11:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(2),n=u(r(0)),l=u(r(12)),o=r(13);function u(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(21);var p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,s(t).call(this,e))).state={isLoading:!0,groups:[]},r}var r,u,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(u=[{key:"componentDidMount",value:function(){return(0,a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.listOfferGroups)(this.props.endpoint);case 2:t=e.sent,this.setState({isLoading:!1,groups:t});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"buildGroupActions",value:function(e){var t,r=e.offers.length>0,a=e.is_system_group,l=r||a?"disabled":"",o=void 0;return a?t=gettext("System groups can not be deleted."):r?t=gettext("Remove all offers from this group to delete it."):(t=interpolate(gettext("Delete the %s offer group"),[e.name]),o=e.delete_link),n.default.createElement("div",{className:"btn-toolbar"},n.default.createElement("div",{className:"btn-group"},n.default.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"true"},gettext("Actions")," ",n.default.createElement("span",{className:"caret"})),n.default.createElement("ul",{className:"dropdown-menu pull-right"},n.default.createElement("li",null,n.default.createElement("a",{href:e.update_link,title:interpolate(gettext("Edit the details of the %s offer group"),[e.name])},gettext("Edit"))),n.default.createElement("li",{className:l,title:t},n.default.createElement("a",{href:o},gettext("Delete"))))))}},{key:"buildBooleanLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return n.default.createElement("span",{className:"label label-success"},gettext("Yes"));var r=t?"label-danger":"label-default";return n.default.createElement("span",{className:"label ".concat(r)},gettext("No"))}},{key:"buildOfferRow",value:function(e,t){var r=(0,l.default)({offergroup__offer:!0,"offergroup__offer--inactive":!t.is_available});return n.default.createElement("tr",{key:"offer-".concat(t.id),className:r},n.default.createElement("td",{className:"offergroup__offer__index"},n.default.createElement("a",{href:t.details_link},e)),n.default.createElement("td",{className:"offergroup__offer__name"},n.default.createElement("a",{href:t.details_link},t.name)),n.default.createElement("td",{className:"offergroup__offer__priority"},t.priority),n.default.createElement("td",{className:"offergroup__offer__type"},n.default.createElement("span",{className:"label label-info"},gettext("Offer"))))}},{key:"buildVoucherRow",value:function(e,t){return t.vouchers.map((function(r){var a=(0,l.default)({offergroup__voucher:!0,"offergroup__voucher--inactive":!r.is_active});return n.default.createElement("tr",{key:"voucher-".concat(r.id),className:a},n.default.createElement("td",{className:"offergroup__voucher__index"},n.default.createElement("a",{href:r.details_link},e)),n.default.createElement("td",{className:"offergroup__voucher__name"},n.default.createElement("a",{href:r.details_link},r.name)),n.default.createElement("td",{className:"offergroup__voucher__priority"},t.priority),n.default.createElement("td",{className:"offergroup__voucher__type"},n.default.createElement("span",{className:"label label-success"},gettext("Voucher"))))}))}},{key:"buildOfferList",value:function(e){var t=this,r=e.offers.filter((function(e){return!("Voucher"===e.offer_type&&e.vouchers.length<=0)})).map((function(e,r){var a=r+1;return e.vouchers.length>0?t.buildVoucherRow(a,e):t.buildOfferRow(a,e)}));return n.default.createElement("table",{className:"table table-bordered table-striped offergroup-subtable"},n.default.createElement("caption",null,e.name),n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{className:"offergroup__offer__index"},gettext("#")),n.default.createElement("th",{className:"offergroup__offer__name"},gettext("Name")),n.default.createElement("th",{className:"offergroup__offer__priority"},gettext("Priority")),n.default.createElement("th",{className:"offergroup__offer__type"},gettext("Type")))),n.default.createElement("tbody",null,r))}},{key:"buildGroupRows",value:function(){var e=this,t=this;return this.state.isLoading?n.default.createElement("tr",null,n.default.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("Loadingâ€¦"))):this.state.groups.length<=0?n.default.createElement("tr",null,n.default.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("No Offer Groups found."))):this.state.groups.map((function(r){return n.default.createElement("tr",{key:r.id,"data-group-slug":r.slug},n.default.createElement("td",null,r.name),n.default.createElement("td",null,e.buildBooleanLabel(r.is_system_group)),n.default.createElement("td",null,r.priority),n.default.createElement("td",{className:"subtable-container"},t.buildOfferList(r)),n.default.createElement("td",null,t.buildGroupActions(r)))}))}},{key:"render",value:function(){return n.default.createElement("table",{className:"table table-bordered"},n.default.createElement("caption",null,n.default.createElement("i",{className:"icon-gift icon-large"})),n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("th",null,gettext("Name")),n.default.createElement("th",null,gettext("Is System Group?")),n.default.createElement("th",null,gettext("Priority")),n.default.createElement("th",null,gettext("Group Contents")),n.default.createElement("th",null,gettext("Actions"))),this.buildGroupRows()))}}])&&c(r.prototype,u),f&&c(r,f),t}(n.default.Component);t.default=p},13:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listOfferGroups=void 0;var a,n=r(2),l=(a=r(14))&&a.__esModule?a:{default:a};t.listOfferGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard/offers/api/offergroups/";return(0,n.__awaiter)(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.get(e).set("Accept","application/json");case 2:return r=t.sent,t.abrupt("return",r.body);case 4:case"end":return t.stop()}}),t)})))}},21:function(e,t,r){},5:function(e,t,r){"use strict";var a=o(r(0)),n=r(7),l=o(r(11));function o(e){return e&&e.__esModule?e:{default:e}}var u,f;u=document.querySelector("#offergroup-table"),f=a.default.createElement(l.default,{endpoint:u.dataset.offergroupApi||""}),(0,n.render)(f,u)}});
//# sourceMappingURL=offergroups.js.map