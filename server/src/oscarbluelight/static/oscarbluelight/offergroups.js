webpackJsonp([0],{80:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(22),u=r(84),c=r(82);r(83);var s=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={groups:[]},r}return l(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;c.listOfferGroups(this.props.endpoint,function(t,r){if(t)return console.log(t),void console.log(r);var n=r.body;e.setState({groups:n})})}},{key:"buildGroupActions",value:function(e){var t=e.offers.length>0?"disabled":"",r=e.offers.length>0?"Remove all offers from this group to delete it":"Delete the "+e.name+" offer group";return i.createElement("div",{className:"btn-toolbar"},i.createElement("div",{className:"btn-group"},i.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"true"},"Actions ",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu pull-right"},i.createElement("li",null,i.createElement("a",{href:e.update_link,title:"Edit the details of the "+e.name+" offer group"},"Edit")),i.createElement("li",{className:t,title:r},i.createElement("a",{href:e.delete_link},"Delete")))))}},{key:"buildOfferListItem",value:function(e){if(!e.vouchers.length){var t=u({offergroup__offer:!0,"offergroup__offer--inactive":!e.is_available});return i.createElement("li",{key:"offer-"+e.id,className:t},i.createElement("a",{href:e.details_link},e.name," (priority ",e.priority,")"),i.createElement("span",{className:"label label-info"},"Offer"))}return e.vouchers.map(function(t){var r=u({offergroup__voucher:!0,"offergroup__voucher--inactive":!t.is_active});return i.createElement("li",{key:"voucher-"+t.id,className:r},i.createElement("a",{href:t.details_link},t.name," (priority ",e.priority,")"),i.createElement("span",{className:"label label-success"},"Voucher"))})}},{key:"buildOfferList",value:function(e){var t=this,r=e.offers.map(function(e){return t.buildOfferListItem(e)});return i.createElement("ol",null,r)}},{key:"buildGroupRows",value:function(){var e=this;return this.state.groups.length<=0?i.createElement("tr",null,i.createElement("td",{colSpan:4,className:"offergroup__empty"},"No Offer Groups found.")):this.state.groups.map(function(t){return i.createElement("tr",{key:t.id},i.createElement("td",null,t.name),i.createElement("td",null,t.priority),i.createElement("td",null,e.buildOfferList(t)),i.createElement("td",null,e.buildGroupActions(t)))})}},{key:"render",value:function(){return i.createElement("table",{className:"table table-striped table-bordered"},i.createElement("caption",null,i.createElement("i",{className:"icon-gift icon-large"})),i.createElement("tbody",null,i.createElement("tr",null,i.createElement("th",null,"Name"),i.createElement("th",null,"Priority"),i.createElement("th",null,"Contains Offers"),i.createElement("th",null,"Actions")),this.buildGroupRows()))}}]),t}(i.Component);t.default=s},81:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),o=r(29),l=r(80);!function(){var e=document.querySelector("#offergroup-table"),t=n.createElement(l.default,{endpoint:e.dataset.offergroupApi});o.render(t,e)}()},82:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(48);t.listOfferGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard/offers/api/offergroups/",t=arguments[1];return n.get(e).set("Accept","application/json").end(t)}},83:function(e,t){},84:function(e,t,r){var n,o;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n))e.push(r.apply(null,n));else if("object"===o)for(var a in n)l.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var l={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=r:(n=[],void 0!==(o=function(){return r}.apply(t,n))&&(e.exports=o))}()}},[81]);
//# sourceMappingURL=offergroups.js.map