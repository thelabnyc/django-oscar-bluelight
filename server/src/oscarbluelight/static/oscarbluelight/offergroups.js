webpackJsonp([0],{80:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=r(22),i=r(84),s=r(82);r(83);var c=function(e){function t(e){n(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={groups:[]},r}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;s.listOfferGroups(this.props.endpoint,function(t,r){if(t)return console.log(t),void console.log(r);var n=r.body;e.setState({groups:n})})}},{key:"buildGroupActions",value:function(e){var t=e.offers.length>0,r=e.is_system_group,n=t||r?"disabled":"",l=void 0,o=void 0;return r?l="System groups can not be deleted.":t?l="Remove all offers from this group to delete it.":(l="Delete the "+e.name+" offer group",o=e.delete_link),u.createElement("div",{className:"btn-toolbar"},u.createElement("div",{className:"btn-group"},u.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"true"},"Actions ",u.createElement("span",{className:"caret"})),u.createElement("ul",{className:"dropdown-menu pull-right"},u.createElement("li",null,u.createElement("a",{href:e.update_link,title:"Edit the details of the "+e.name+" offer group"},"Edit")),u.createElement("li",{className:n,title:l},u.createElement("a",{href:o},"Delete")))))}},{key:"buildOfferListItem",value:function(e){if(!e.vouchers.length){var t=i({offergroup__offer:!0,"offergroup__offer--inactive":!e.is_available});return u.createElement("li",{key:"offer-"+e.id,className:t},u.createElement("a",{href:e.details_link},e.name," (priority ",e.priority,")"),u.createElement("span",{className:"label label-info"},"Offer"))}return e.vouchers.map(function(t){var r=i({offergroup__voucher:!0,"offergroup__voucher--inactive":!t.is_active});return u.createElement("li",{key:"voucher-"+t.id,className:r},u.createElement("a",{href:t.details_link},t.name," (priority ",e.priority,")"),u.createElement("span",{className:"label label-success"},"Voucher"))})}},{key:"buildOfferList",value:function(e){var t=this,r=e.offers.map(function(e){return t.buildOfferListItem(e)});return u.createElement("ol",null,r)}},{key:"buildSystemGroupLabel",value:function(e){return e.is_system_group?u.createElement("span",{className:"label label-success"},"Yes"):u.createElement("span",{className:"label label-default"},"No")}},{key:"buildGroupRows",value:function(){var e=this,t=this;return this.state.groups.length<=0?u.createElement("tr",null,u.createElement("td",{colSpan:4,className:"offergroup__empty"},"No Offer Groups found.")):this.state.groups.map(function(r){return u.createElement("tr",{key:r.id,"data-group-slug":r.slug},u.createElement("td",null,r.name),u.createElement("td",null,e.buildSystemGroupLabel(r)),u.createElement("td",null,r.priority),u.createElement("td",null,t.buildOfferList(r)),u.createElement("td",null,t.buildGroupActions(r)))})}},{key:"render",value:function(){return u.createElement("table",{className:"table table-striped table-bordered"},u.createElement("caption",null,u.createElement("i",{className:"icon-gift icon-large"})),u.createElement("tbody",null,u.createElement("tr",null,u.createElement("th",null,"Name"),u.createElement("th",null,"Is System Group?"),u.createElement("th",null,"Priority"),u.createElement("th",null,"Contains Offers"),u.createElement("th",null,"Actions")),this.buildGroupRows()))}}]),t}(u.Component);t.default=c},81:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),l=r(29),o=r(80);!function(){var e=document.querySelector("#offergroup-table"),t=n.createElement(o.default,{endpoint:e.dataset.offergroupApi});l.render(t,e)}()},82:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(48);t.listOfferGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard/offers/api/offergroups/",t=arguments[1];return n.get(e).set("Accept","application/json").end(t)}},83:function(e,t){},84:function(e,t,r){var n,l;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n))e.push(r.apply(null,n));else if("object"===l)for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=r:(n=[],void 0!==(l=function(){return r}.apply(t,n))&&(e.exports=l))}()}},[81]);
//# sourceMappingURL=offergroups.js.map