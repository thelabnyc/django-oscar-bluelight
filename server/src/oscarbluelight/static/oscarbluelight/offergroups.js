!function(e){function t(t){for(var n,l,u=t[0],c=t[1],i=t[2],s=0,p=[];s<u.length;s++)l=u[s],o[l]&&p.push(o[l][0]),o[l]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(f&&f(t);p.length;)p.shift()();return a.push.apply(a,i||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var c=r[u];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},o={0:0},a=[];function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var f=c;a.push([3,1]),r()}({10:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(0),i=r(11),f=r(12);r(19);var s=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,l(t).call(this,e))).state={isLoading:!0,groups:[]},r}var r,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,c.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=this;f.listOfferGroups(this.props.endpoint,function(t,r){if(t)return console.log(t),void console.log(r);var n=r.body;e.setState({isLoading:!1,groups:n})})}},{key:"buildGroupActions",value:function(e){var t,r,n=e.offers.length>0,o=e.is_system_group,a=n||o?"disabled":"";return o?t=gettext("System groups can not be deleted."):n?t=gettext("Remove all offers from this group to delete it."):(t=interpolate(gettext("Delete the %s offer group"),[e.name]),r=e.delete_link),c.createElement("div",{className:"btn-toolbar"},c.createElement("div",{className:"btn-group"},c.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"true"},gettext("Actions")," ",c.createElement("span",{className:"caret"})),c.createElement("ul",{className:"dropdown-menu pull-right"},c.createElement("li",null,c.createElement("a",{href:e.update_link,title:interpolate(gettext("Edit the details of the %s offer group"),[e.name])},gettext("Edit"))),c.createElement("li",{className:a,title:t},c.createElement("a",{href:r},gettext("Delete"))))))}},{key:"buildBooleanLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return c.createElement("span",{className:"label label-success"},gettext("Yes"));var r=t?"label-danger":"label-default";return c.createElement("span",{className:"label ".concat(r)},gettext("No"))}},{key:"buildOfferRow",value:function(e,t){var r=i({offergroup__offer:!0,"offergroup__offer--inactive":!t.is_available});return c.createElement("tr",{key:"offer-".concat(t.id),className:r},c.createElement("td",{className:"offergroup__offer__index"},c.createElement("a",{href:t.details_link},e)),c.createElement("td",{className:"offergroup__offer__name"},c.createElement("a",{href:t.details_link},t.name)),c.createElement("td",{className:"offergroup__offer__priority"},t.priority),c.createElement("td",{className:"offergroup__offer__type"},c.createElement("span",{className:"label label-info"},gettext("Offer"))))}},{key:"buildVoucherRow",value:function(e,t){return t.vouchers.map(function(r){var n=i({offergroup__voucher:!0,"offergroup__voucher--inactive":!r.is_active});return c.createElement("tr",{key:"voucher-".concat(r.id),className:n},c.createElement("td",{className:"offergroup__voucher__index"},c.createElement("a",{href:r.details_link},e)),c.createElement("td",{className:"offergroup__voucher__name"},c.createElement("a",{href:r.details_link},r.name)),c.createElement("td",{className:"offergroup__voucher__priority"},t.priority),c.createElement("td",{className:"offergroup__voucher__type"},c.createElement("span",{className:"label label-success"},gettext("Voucher"))))})}},{key:"buildOfferList",value:function(e){var t=this,r=e.offers.filter(function(e){return!("Voucher"===e.offer_type&&e.vouchers.length<=0)}).map(function(e,r){var n=r+1;return e.vouchers.length>0?t.buildVoucherRow(n,e):t.buildOfferRow(n,e)});return c.createElement("table",{className:"table table-bordered table-striped offergroup-subtable"},c.createElement("caption",null,e.name),c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{className:"offergroup__offer__index"},gettext("#")),c.createElement("th",{className:"offergroup__offer__name"},gettext("Name")),c.createElement("th",{className:"offergroup__offer__priority"},gettext("Priority")),c.createElement("th",{className:"offergroup__offer__type"},gettext("Type")))),c.createElement("tbody",null,r))}},{key:"buildGroupRows",value:function(){var e=this,t=this;return this.state.isLoading?c.createElement("tr",null,c.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("Loadingâ€¦"))):this.state.groups.length<=0?c.createElement("tr",null,c.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("No Offer Groups found."))):this.state.groups.map(function(r){return c.createElement("tr",{key:r.id,"data-group-slug":r.slug},c.createElement("td",null,r.name),c.createElement("td",null,e.buildBooleanLabel(r.is_system_group)),c.createElement("td",null,r.priority),c.createElement("td",{className:"subtable-container"},t.buildOfferList(r)),c.createElement("td",null,t.buildGroupActions(r)))})}},{key:"render",value:function(){return c.createElement("table",{className:"table table-bordered"},c.createElement("caption",null,c.createElement("i",{className:"icon-gift icon-large"})),c.createElement("tbody",null,c.createElement("tr",null,c.createElement("th",null,gettext("Name")),c.createElement("th",null,gettext("Is System Group?")),c.createElement("th",null,gettext("Priority")),c.createElement("th",null,gettext("Group Contents")),c.createElement("th",null,gettext("Actions"))),this.buildGroupRows()))}}])&&o(r.prototype,n),s&&o(r,s),t}();t.default=s},12:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13);t.listOfferGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/dashboard/offers/api/offergroups/",t=arguments.length>1?arguments[1]:void 0;return n.get(e).set("Accept","application/json").end(t)}},19:function(e,t,r){},3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,a=r(0),l=r(5),u=r(10);n=document.querySelector("#offergroup-table"),o=a.createElement(u.default,{endpoint:n.dataset.offergroupApi}),l.render(o,n)}});
//# sourceMappingURL=offergroups.js.map