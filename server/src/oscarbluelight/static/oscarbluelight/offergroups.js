!function(e){function t(t){for(var l,o,u=t[0],f=t[1],s=t[2],d=0,i=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&i.push(a[o][0]),a[o]=0;for(l in f)Object.prototype.hasOwnProperty.call(f,l)&&(e[l]=f[l]);for(c&&c(t);i.length;)i.shift()();return n.push.apply(n,s||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],l=!0,u=1;u<r.length;u++){var f=r[u];0!==a[f]&&(l=!1)}l&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var l={},a={0:0},n=[];function o(t){if(l[t])return l[t].exports;var r=l[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=l,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(r,l,function(t){return e[t]}.bind(null,l));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window.webpackJsonp=window.webpackJsonp||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var c=f;n.push([107,1]),r()}({107:function(e,t,r){"use strict";r(108),r(113),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(125),r(128),r(129),r(131),r(135),r(136),r(138),r(140),r(141),r(142),r(143),r(144),r(146),r(147),r(149),r(150),r(151),r(152),r(153),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(173),r(174),r(175),r(180),r(103);var l=o(r(64)),a=r(182),n=o(r(186));function o(e){return e&&e.__esModule?e:{default:e}}!function(){const e=document.querySelector("#offergroup-table"),t=l.default.createElement(n.default,{endpoint:e.dataset.offergroupApi||""});(0,a.render)(t,e)}()},186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(105),a=u(r(64)),n=u(r(187)),o=r(188);function u(e){return e&&e.__esModule?e:{default:e}}r(196);class f extends a.default.Component{constructor(e){super(e),this.state={isLoading:!0,groups:[]}}componentDidMount(){return(0,l.__awaiter)(this,void 0,void 0,(function*(){const e=yield(0,o.listOfferGroups)(this.props.endpoint);this.setState({isLoading:!1,groups:e})}))}buildGroupActions(e){const t=e.offers.length>0,r=e.is_system_group,l=t||r?"disabled":"";let n,o=void 0;return r?n=gettext("System groups can not be deleted."):t?n=gettext("Remove all offers from this group to delete it."):(n=interpolate(gettext("Delete the %s offer group"),[e.name]),o=e.delete_link),a.default.createElement("div",{className:"btn-toolbar"},a.default.createElement("div",{className:"btn-group"},a.default.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"true"},gettext("Actions")," ",a.default.createElement("span",{className:"caret"})),a.default.createElement("ul",{className:"dropdown-menu pull-right"},a.default.createElement("li",null,a.default.createElement("a",{href:e.update_link,title:interpolate(gettext("Edit the details of the %s offer group"),[e.name])},gettext("Edit"))),a.default.createElement("li",{className:l,title:n},a.default.createElement("a",{href:o},gettext("Delete"))))))}buildBooleanLabel(e,t=!1){if(e)return a.default.createElement("span",{className:"label label-success"},gettext("Yes"));const r=t?"label-danger":"label-default";return a.default.createElement("span",{className:"label ".concat(r)},gettext("No"))}buildOfferRow(e,t){const r=(0,n.default)({offergroup__offer:!0,"offergroup__offer--inactive":!t.is_available});return a.default.createElement("tr",{key:"offer-".concat(t.id),className:r},a.default.createElement("td",{className:"offergroup__offer__index"},a.default.createElement("a",{href:t.details_link},e)),a.default.createElement("td",{className:"offergroup__offer__name"},a.default.createElement("a",{href:t.details_link},t.name)),a.default.createElement("td",{className:"offergroup__offer__priority"},t.priority),a.default.createElement("td",{className:"offergroup__offer__type"},a.default.createElement("span",{className:"label label-info"},gettext("Offer"))))}buildVoucherRow(e,t){return t.vouchers.map(r=>{const l=(0,n.default)({offergroup__voucher:!0,"offergroup__voucher--inactive":!r.is_active});return a.default.createElement("tr",{key:"voucher-".concat(r.id),className:l},a.default.createElement("td",{className:"offergroup__voucher__index"},a.default.createElement("a",{href:r.details_link},e)),a.default.createElement("td",{className:"offergroup__voucher__name"},a.default.createElement("a",{href:r.details_link},r.name)),a.default.createElement("td",{className:"offergroup__voucher__priority"},t.priority),a.default.createElement("td",{className:"offergroup__voucher__type"},a.default.createElement("span",{className:"label label-success"},gettext("Voucher"))))})}buildOfferList(e){const t=this,r=e.offers.filter(e=>!("Voucher"===e.offer_type&&e.vouchers.length<=0)).map((e,r)=>{const l=r+1;return e.vouchers.length>0?t.buildVoucherRow(l,e):t.buildOfferRow(l,e)});return a.default.createElement("table",{className:"table table-bordered table-striped offergroup-subtable"},a.default.createElement("caption",null,e.name),a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",{className:"offergroup__offer__index"},gettext("#")),a.default.createElement("th",{className:"offergroup__offer__name"},gettext("Name")),a.default.createElement("th",{className:"offergroup__offer__priority"},gettext("Priority")),a.default.createElement("th",{className:"offergroup__offer__type"},gettext("Type")))),a.default.createElement("tbody",null,r))}buildGroupRows(){const e=this;return this.state.isLoading?a.default.createElement("tr",null,a.default.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("Loadingâ€¦"))):this.state.groups.length<=0?a.default.createElement("tr",null,a.default.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("No Offer Groups found."))):this.state.groups.map(t=>a.default.createElement("tr",{key:t.id,"data-group-slug":t.slug},a.default.createElement("td",null,t.name),a.default.createElement("td",null,this.buildBooleanLabel(t.is_system_group)),a.default.createElement("td",null,t.priority),a.default.createElement("td",{className:"subtable-container"},e.buildOfferList(t)),a.default.createElement("td",null,e.buildGroupActions(t))))}render(){return a.default.createElement("table",{className:"table table-bordered"},a.default.createElement("caption",null,a.default.createElement("i",{className:"icon-gift icon-large"})),a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("th",null,gettext("Name")),a.default.createElement("th",null,gettext("Is System Group?")),a.default.createElement("th",null,gettext("Priority")),a.default.createElement("th",null,gettext("Group Contents")),a.default.createElement("th",null,gettext("Actions"))),this.buildGroupRows()))}}var s=f;t.default=s},188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listOfferGroups=void 0;var l,a=r(105),n=(l=r(189))&&l.__esModule?l:{default:l};t.listOfferGroups=(e="/dashboard/offers/api/offergroups/")=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){return(yield n.default.get(e).set("Accept","application/json")).body}))},196:function(e,t,r){}});
//# sourceMappingURL=offergroups.js.map