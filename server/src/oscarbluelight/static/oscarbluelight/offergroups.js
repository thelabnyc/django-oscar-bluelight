!function(e){function t(t){for(var a,n,u=t[0],f=t[1],s=t[2],c=0,i=[];c<u.length;c++)n=u[c],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&i.push(l[n][0]),l[n]=0;for(a in f)Object.prototype.hasOwnProperty.call(f,a)&&(e[a]=f[a]);for(d&&d(t);i.length;)i.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,u=1;u<r.length;u++){var f=r[u];0!==l[f]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},l={0:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var u=window.webpackJsonp=window.webpackJsonp||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var d=f;o.push([107,1]),r()}({107:function(e,t,r){"use strict";r(108),r(113),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(125),r(128),r(129),r(131),r(135),r(136),r(138),r(140),r(141),r(142),r(143),r(144),r(146),r(147),r(149),r(150),r(151),r(152),r(153),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(173),r(174),r(175),r(180),r(103);var a=n(r(64)),l=r(182),o=n(r(186));function n(e){return e&&e.__esModule?e:{default:e}}!function(){const e=document.querySelector("#offergroup-table"),t=a.default.createElement(o.default,{endpoint:e.dataset.offergroupApi||""});(0,l.render)(t,e)}()},186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(105),l=u(r(64)),o=u(r(187)),n=r(188);function u(e){return e&&e.__esModule?e:{default:e}}r(196);class f extends l.default.Component{constructor(e){super(e),this.state={isLoading:!0,groups:[]}}componentDidMount(){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const e=yield(0,n.listOfferGroups)(this.props.endpoint);this.setState({isLoading:!1,groups:e})}))}buildGroupActions(e){const t=e.offers.length>0,r=e.is_system_group,a=t||r?"disabled":"";let o,n=void 0;return r?o=gettext("System groups can not be deleted."):t?o=gettext("Remove all offers from this group to delete it."):(o=interpolate(gettext("Delete the %s offer group"),[e.name]),n=e.delete_link),l.default.createElement("div",{className:"btn-toolbar"},l.default.createElement("div",{className:"dropdown"},l.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},gettext("Actions")),l.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},l.default.createElement("a",{className:"dropdown-item",href:e.update_link,title:interpolate(gettext("Edit the details of the %s offer group"),[e.name])},gettext("Edit")),l.default.createElement("a",{className:"dropdown-item ".concat(a),title:o,href:n},gettext("Delete")))))}buildBooleanLabel(e,t=!1){if(e)return l.default.createElement("span",{className:"label label-success"},gettext("Yes"));const r=t?"label-danger":"label-default";return l.default.createElement("span",{className:"label ".concat(r)},gettext("No"))}buildOfferRow(e,t){const r=(0,o.default)({offergroup__offer:!0,"offergroup__offer--inactive":!t.is_available});return l.default.createElement("tr",{key:"offer-".concat(t.id),className:r},l.default.createElement("td",{className:"offergroup__offer__index"},l.default.createElement("a",{href:t.details_link},e)),l.default.createElement("td",{className:"offergroup__offer__name"},l.default.createElement("a",{href:t.details_link},t.name)),l.default.createElement("td",{className:"offergroup__offer__priority"},t.priority),l.default.createElement("td",{className:"offergroup__offer__type"},l.default.createElement("span",{className:"label label-info"},gettext("Offer"))))}buildVoucherRow(e,t){return t.vouchers.map(r=>{const a=(0,o.default)({offergroup__voucher:!0,"offergroup__voucher--inactive":!r.is_active});return l.default.createElement("tr",{key:"voucher-".concat(r.id),className:a},l.default.createElement("td",{className:"offergroup__voucher__index"},l.default.createElement("a",{href:r.details_link},e)),l.default.createElement("td",{className:"offergroup__voucher__name"},l.default.createElement("a",{href:r.details_link},r.name)),l.default.createElement("td",{className:"offergroup__voucher__priority"},t.priority),l.default.createElement("td",{className:"offergroup__voucher__type"},l.default.createElement("span",{className:"label label-success"},gettext("Voucher"))))})}buildOfferList(e){const t=this,r=e.offers.filter(e=>!("Voucher"===e.offer_type&&e.vouchers.length<=0)).map((e,r)=>{const a=r+1;return e.vouchers.length>0?t.buildVoucherRow(a,e):t.buildOfferRow(a,e)});return l.default.createElement("table",{className:"table table-bordered table-striped offergroup-subtable"},l.default.createElement("caption",null,e.name),l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{className:"offergroup__offer__index"},gettext("#")),l.default.createElement("th",{className:"offergroup__offer__name"},gettext("Name")),l.default.createElement("th",{className:"offergroup__offer__priority"},gettext("Priority")),l.default.createElement("th",{className:"offergroup__offer__type"},gettext("Type")))),l.default.createElement("tbody",null,r))}buildGroupRows(){const e=this;return this.state.isLoading?l.default.createElement("tr",null,l.default.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("Loadingâ€¦"))):this.state.groups.length<=0?l.default.createElement("tr",null,l.default.createElement("td",{colSpan:5,className:"offergroup__empty"},gettext("No Offer Groups found."))):this.state.groups.map(t=>l.default.createElement("tr",{key:t.id,"data-group-slug":t.slug},l.default.createElement("td",null,t.name),l.default.createElement("td",null,this.buildBooleanLabel(t.is_system_group)),l.default.createElement("td",null,t.priority),l.default.createElement("td",{className:"subtable-container"},e.buildOfferList(t)),l.default.createElement("td",null,e.buildGroupActions(t))))}render(){return l.default.createElement("table",{className:"table table-bordered"},l.default.createElement("caption",null,l.default.createElement("i",{className:"fas fa-gift"})),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("th",null,gettext("Name")),l.default.createElement("th",null,gettext("Is System Group?")),l.default.createElement("th",null,gettext("Priority")),l.default.createElement("th",null,gettext("Group Contents")),l.default.createElement("th",null,gettext("Actions"))),this.buildGroupRows()))}}var s=f;t.default=s},188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listOfferGroups=void 0;var a,l=r(105),o=(a=r(189))&&a.__esModule?a:{default:a};t.listOfferGroups=(e="/dashboard/offers/api/offergroups/")=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return(yield o.default.get(e).set("Accept","application/json")).body}))},196:function(e,t,r){}});
//# sourceMappingURL=offergroups.js.map